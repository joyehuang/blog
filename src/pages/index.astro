---
import { Image } from 'astro:assets'
import type { CollectionEntry } from 'astro:content'
import avatar from 'src/assets/avatar.png'

import { Quote } from 'astro-pure/advanced'
import { PostPreview } from 'astro-pure/components/pages'
import { getBlogCollection, sortMDByDate } from 'astro-pure/server'
import { Button, Card, Icon, Label } from 'astro-pure/user'
import PaperPreview from '@/components/papers/PaperPreview.astro'
import PageLayout from '@/layouts/BaseLayout.astro'
import Section from '@/components/home/Section.astro'
import SkillLayout from '@/components/home/SkillLayout.astro'
import config from '@/site-config'

const languages = ['TypeScript', 'JavaScript', 'Python', 'Java', 'MySQL']
const frontend = ['React', 'NextJs', 'Vite']
const backend = ['Vercel', 'Waline', 'Firebase', 'Nodejs']
const tools = ['Curor', 'Git', 'Docker', 'Postman', 'ESlint/Prettier', 'Jest']

const MAX_POSTS = 10
const allPosts = await getBlogCollection()
const allPostsByDate = sortMDByDate(allPosts).slice(0, MAX_POSTS)
const MAX_PAPERS = 5
const allPapers = (await getBlogCollection('papers')) as CollectionEntry<'papers'>[]
const allPapersByDate = sortMDByDate(allPapers).slice(0, MAX_PAPERS) as CollectionEntry<'papers'>[]
---
<script defer data-domain="joyehuang.me" src="https://plausible.io/js/script.js"></script>
<PageLayout meta={{ title: 'Home' }} highlightColor='#659EB9'>
  <main class='flex w-full flex-col items-center'>
    <section class='animate mb-10 flex flex-col items-center gap-y-7 relative z-50' id='content-header'>
      <Image
        src={avatar}
        alt='profile'
        class='h-28 w-auto rounded-full border p-1'
        loading='eager'
      />

      <div class='flex flex-col items-center gap-y-4'>
        <h1 class='text-3xl font-bold'>{config.author}</h1>
        <div class='flex flex-wrap justify-center gap-x-7 gap-y-3'>
          <Label title='Melbourne, Australia'>
            <Icon name='location' class='size-5' slot='icon' />
          </Label>
          <Label
            title='Source code'
            as='a'
            href='https://github.com/joyehuang/blog'
            target='_blank'
          >
            <Icon name='github' class='size-5' slot='icon' />
          </Label>
        </div>
      </div>

      {/* Connect Me! */}
      <div class='flex flex-row gap-3'>
        <a
          href='https://www.linkedin.com/in/deshiouhuang/'
          target='_blank'
          class='flex flex-row items-center gap-x-3 rounded-full border bg-background px-4 py-2 text-sm shadow-sm transition-shadow hover:shadow-md'
        >
          <span class='relative flex items-center justify-center'>
            <span
              class='absolute size-2 animate-ping rounded-full border border-green-400 bg-green-400 opacity-75'
            ></span>
            <span class='size-2 rounded-full bg-green-400'></span>
          </span>
          <p class='font-medium text-muted-foreground'>Connect Me!</p>
        </a>
        <div class='qq-group-card group relative'>
          <div
            class='flex flex-row items-center gap-x-3 rounded-full border bg-background px-4 py-2 text-sm shadow-sm transition-all hover:shadow-md cursor-pointer'
          >
            <svg class='size-4' viewBox='0 0 24 24' fill='currentColor'>
              <path d='M21.395 15.035a39.548 39.548 0 0 0-.803-2.264l-1.079-2.695c.001-.032.014-.562.014-.836C19.526 4.632 17.351 0 12 0S4.474 4.632 4.474 9.241c0 .274.013.804.014.836l-1.08 2.695a38.97 38.97 0 0 0-.802 2.264c-1.021 3.283-.69 4.643-.438 4.673.54.065 1.514-2.114 1.514-2.114 0 .035-.165 4.424 1.47 5.452.182.12 1.892 1.028 3.956 1.028.409 0 .82-.035 1.226-.104v-.003a11.63 11.63 0 0 0 2.657 0v.003c.406.069.817.104 1.226.104 2.064 0 3.774-.909 3.956-1.028 1.635-1.028 1.47-5.417 1.47-5.452 0 0 .974 2.179 1.514 2.114.252-.03.583-1.39-.438-4.673z'></path>
            </svg>
            <p class='font-medium text-muted-foreground'>交流群</p>
          </div>
          <div class='absolute left-1/2 top-full z-[100] mt-3 -translate-x-1/2 opacity-0 scale-95 transition-all duration-200 group-hover:opacity-100 group-hover:scale-100 pointer-events-none'>
            <div class='rounded-xl border bg-card p-4 shadow-xl backdrop-blur-sm'>
              <p class='mb-3 text-center text-sm font-medium whitespace-nowrap'>扫码加入交流群</p>
              <p class='mb-3 text-center text-xs text-muted-foreground whitespace-nowrap'>技术交流 · 学习打卡</p>
              <img src='/images/qq-group-qrcode.JPG' alt='QQ Group QR Code' class='max-w-[200px] h-auto rounded-lg' />
            </div>
          </div>
        </div>
      </div>
    </section>

    <div id='content' class='animate flex flex-col gap-y-10 md:w-4/5 lg:w-5/6 relative z-0'>
      <Section title='About'>
        <p class='text-muted-foreground'>Frontend Developer</p>
        <p class='text-muted-foreground'>
          一名正在墨尔本上学的大二前端开发者，目标成为一名全栈开发者。最近刚入门摄影圈，平时喜欢弹琴与拉大提琴！
        </p>
        <Button title='More about me' class='w-fit self-end' href='/about' style='ahead' />
      </Section>
      {
        allPostsByDate.length > 0 && (
          <Section title='Posts'>
            <ul class='flex flex-col gap-y-1.5 sm:gap-y-2'>
              {allPostsByDate.map((p) => (
                <li class='flex flex-col gap-x-2 sm:flex-row'>
                  <PostPreview post={p} />
                </li>
              ))}
            </ul>
            <Button title='More posts' class='w-fit self-end' href='/blog' style='ahead' />
          </Section>
        )
      }
      {
        allPapersByDate.length > 0 && (
          <Section title='Papers'>
            <ul class='flex flex-col gap-y-2'>
              {allPapersByDate.map((paper) => (
                <PaperPreview {paper} />
              ))}
            </ul>
            <Button title='More papers' class='w-fit self-end' href='/papers' style='ahead' />
          </Section>
        )
      }

      <Section title='Experience'>
        <Card
          heading='上海特赞 Tezign'
          subheading='AIGC研发部门全栈实习生'
          date='Present'
        >
          <ul class='ms-4 list-disc text-muted-foreground'>
            <li>
              负责AIGC相关功能的全栈开发工作
            </li>
          </ul>
        </Card>
      </Section>
      <Section title='Education'>
        <Card
          as='a'
          heading='墨尔本大学'
          subheading='理学学士 - 计算与软件工程'
          date='2月 2024 - 6月 2027'
        >
          {
            /* <ul class='ms-4 list-disc text-muted-foreground'>
          <li>
            Lorem, ipsum dolor sit amet consectetur adipisicing elit. Dolore debitis recusandae, ut
            molestiae laboriosam pariatur!
          </li>
          <li>Lorem ipsum dolor sit amet consectetur adipisicing elit. Molestiae, pariatur!</li>
        </ul> */
          }
        </Card>
      </Section> 
      <!--
      <Section title='Website List'>
        <div class='grid grid-cols-1 gap-3 sm:grid-cols-2'>
          <ProjectCard
            href='https://www.youtube.com/watch?v=dQw4w9WgXcQ'
            heading='Lorem ipsum'
            subheading='dolor sit amet, oratio ornatus explicari pro ex'
            imagePath='/src/assets/projects/alex-tyson-2BAXJ7ha74s-unsplash.jpg'
          />
          <ProjectCard
            href='https://www.youtube.com/watch?v=dQw4w9WgXcQ'
            heading='Lorem ipsum'
            subheading='dolor sit amet, oratio ornatus explicari pro ex'
            imagePath='/src/assets/projects/angelica-teran-Bk9hpaXHK4o-unsplash.jpg'
          />
          <ProjectCard
            href='https://www.youtube.com/watch?v=dQw4w9WgXcQ'
            heading='Lorem ipsum'
            subheading='dolor sit amet, oratio ornatus explicari pro ex'
            imagePath='/src/assets/projects/kseniia-zapiatkina-yATU3rg8tNI-unsplash.jpg'
          />
          <ProjectCard
            href='/projects'
            heading='More projects'
            subheading='Check out more projects'
            imagePath='/src/assets/projects/wen-qiao-g_w8I64FiO0-unsplash.jpg'
          />
        </div>
      </Section>
      -->
      <!--
      <Section title='Certifications'>
        <Card
          as='a'
          heading='Lorem ipsum'
          subheading='Lorem ipsum dolor sit amet, vidit suscipit at mei. Quem denique mea id. Usu ei regione indoctum dissentiunt, cu meliore fuisset mei, vel quod voluptua ne. Ex dicat impedit mel, at eum oratio possit voluptatum. Dicat ceteros cu vim. Impetus fuisset ullamcorper pri cu, his posse iisque ad, aliquam honestatis usu id.'
          date='July 2024'
          href='https://www.youtube.com/watch?v=dQw4w9WgXcQ'
        />
      </Section>
      -->

      <Section title='Skills'>
        <SkillLayout title='Languages' skills={languages} />
        <SkillLayout title='Frontend' skills={frontend} />
        <SkillLayout title='Backend' skills={backend} />
        <SkillLayout title='Tools' skills={tools} />
      </Section>
    </div>
    <Quote class='mt-12' />
  </main>
</PageLayout>
